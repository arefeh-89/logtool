<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>Log Processor</title>
    <style>
        body {
            font-family: sans-serif;
            direction: rtl;
            background: #f9fafc;
            text-align: center;
            margin-top: 50px;
        }
        form {
            background: white;
            display: inline-block;
            padding: 20px 40px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        label, select, input, button {
            display: block;
            margin: 10px auto;
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 6px;
            cursor: pointer;
        }
        button:hover {
            background: #1e40af;
        }

        /* Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        #loading {
            display: none;
            margin-top: 20px;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h2>ğŸ§© Ø§Ø¨Ø²Ø§Ø± Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù„Ø§Ú¯</h2>
    <form id="logForm" method="post" enctype="multipart/form-data">
        <label>ÙØ§ÛŒÙ„(Ù‡Ø§ÛŒ) Ù„Ø§Ú¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:</label>
        <input type="file" name="log_files" multiple required>

        <label>Ø¹Ø¨Ø§Ø±Øª Ù…ÙˆØ±Ø¯ Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ:</label>
        <select name="search_select" id="search_select" required>
            {% for option in search_options %}
                <option value="{{ option }}">{{ option }}</option>
            {% endfor %}
            <option value="OTHER">Ø¹Ø¨Ø§Ø±Øª Ø¯ÛŒÚ¯Ø±...</option>
        </select>

        <input type="text" name="search_text" id="search_text" placeholder="Ø¹Ø¨Ø§Ø±Øª Ø¯Ù„Ø®ÙˆØ§Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" style="display:none;">

        <label>Ø¹Ø¨Ø§Ø±Øª Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):</label>
        <input type="text" name="key_pattern" placeholder="Ù…Ø«Ù„Ø§Ù‹ timestamp ÛŒØ§ userID">

        <button type="submit">Ø´Ø±ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø²Ø´</button>

        <div id="loading">
            <div class="spinner"></div>
            <p>Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§...</p>
        </div>
    </form>

    <script>
        // Ù†Ù…Ø§ÛŒØ´ ÙÛŒÙ„Ø¯ Ø¯Ø³ØªÛŒ Ø¯Ø± ØµÙˆØ±Øª Ø§Ù†ØªØ®Ø§Ø¨ OTHER
        document.getElementById("search_select").addEventListener("change", function() {
            const txt = document.getElementById("search_text");
            txt.style.display = this.value === "OTHER" ? "block" : "none";
        });

        // Ù†Ù…Ø§ÛŒØ´ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù‡Ù†Ú¯Ø§Ù… Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù…
        document.getElementById("logForm").addEventListener("submit", function() {
            document.getElementById("loading").style.display = "block";
        });
    </script>
</body>
</html>